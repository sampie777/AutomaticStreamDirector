(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(t,n,e){},15:function(t,n,e){},16:function(t,n,e){},17:function(t,n,e){"use strict";e.r(n);var i=e(0),o=e(1),c=e.n(o),r=e(8),a=e.n(r),s=(e(14),e(15),e(3)),u=e(6),l=e(5),d=e(4),f=e(2),j=(e(16),function t(n,e,i){Object(f.a)(this,t),this.title=n,this.message=e,this.type=i});j.INFO="info",j.SUCCESS="success",j.ERROR="error";function h(t){window.addNotification(t)}var g=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).state={notifications:[]},window.addNotification=function(t){return i.addNotification(t)},i.addNotification=i.addNotification.bind(Object(u.a)(i)),i.removeNotification=i.removeNotification.bind(Object(u.a)(i)),i}return Object(s.a)(e,[{key:"addNotification",value:function(t){t instanceof j?(console.info("Adding notification: ",t),this.setState({notifications:this.state.notifications.concat([t])})):console.error("Cannot add notification, not a valid instance: ",t)}},{key:"removeNotification",value:function(t){var n=this.state.notifications.filter((function(n){return n!==t}));this.setState({notifications:n})}},{key:"render",value:function(){var t=this;return Object(i.jsx)("div",{id:"notifications",children:this.state.notifications.map((function(n){return Object(i.jsx)(b,{notification:n,remove:function(){return t.removeNotification(n)}},n.title)}))})}}]),e}(o.Component),b=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).notification=t.notification,i.element=c.a.createRef(),i.getTransitionDurationForElement=i.getTransitionDurationForElement.bind(Object(u.a)(i)),i.removeNotification=i.removeNotification.bind(Object(u.a)(i)),i}return Object(s.a)(e,[{key:"componentDidMount",value:function(){window.setTimeout(this.removeNotification,1e4)}},{key:"removeNotification",value:function(){var t=this.element.current;if(console.debug("Removing notification:",this),null!==t){t.style.opacity="0";var n=this.getTransitionDurationForElement(t);window.setTimeout(this.props.remove,n)}else console.debug("Notification already (being) removed")}},{key:"getTransitionDurationForElement",value:function(t){var n=window.getComputedStyle(t).transitionDuration;return 1e3*n.substring(0,n.length-1)}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:"notification notification-".concat(this.notification.type),ref:this.element,children:[Object(i.jsx)("a",{className:"notification-close",onClick:this.removeNotification,children:"close"}),Object(i.jsx)("div",{className:"notification-title",children:this.notification.title}),Object(i.jsx)("div",{className:"notification-message",children:this.notification.message})]})}}]),e}(o.Component),v=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).trigger=void 0,i.trigger=t.trigger,i}return Object(s.a)(e,[{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:[this.trigger.name," ",Object(i.jsx)("small",{children:this.trigger.importance})]}),Object(i.jsx)("ol",{children:this.trigger.conditions.map((function(t){return Object(i.jsx)("li",{children:t.name},t.name)}))}),Object(i.jsx)("ol",{children:this.trigger.actionSets.map((function(t){return Object(i.jsx)("li",{children:t.name},t.name)}))})]})}}]),e}(o.Component),O="localhost"===window.location.hostname?"http://localhost:8080/api/v1":window.location.origin+"/api/v1";console.log("API base URL: "+O);var m=function(t){return fetch(t,{method:"GET"})},p={list:function(){return m("".concat(O,"/triggers/list"))},get:function(t){return m("".concat(O,"/triggers/").concat(t))}},x={list:function(){return m("".concat(O,"/actionsets/list"))},get:function(t){return m("".concat(O,"/actionsets/").concat(t))}},y={start:function(){return m("".concat(O,"/director/start"))},stop:function(){return m("".concat(O,"/director/stop"))},status:function(){return m("".concat(O,"/director/status"))},lastTrigger:function(){return m("".concat(O,"/director/lasttrigger"))}},S=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).state={triggers:[]},i.loadList=i.loadList.bind(Object(u.a)(i)),i}return Object(s.a)(e,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"loadList",value:function(){var t=this;p.list().then((function(t){return t.json()})).then((function(n){var e=n.data;console.log(e),t.setState({triggers:e})})).catch((function(t){console.error("Error updating Trigger list",t),h(new j("Error updating Trigger list",t.message,j.ERROR))}))}},{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Triggers"}),this.state.triggers.length>0?this.state.triggers.sort((function(t,n){return n.importance-t.importance})).map((function(t){return Object(i.jsx)(v,{trigger:t},t.name)})):Object(i.jsx)("i",{children:"Much empty"})]})}}]),e}(o.Component),k=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).actionSet=void 0,i.actionSet=t.actionSet,i}return Object(s.a)(e,[{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:this.actionSet.name}),Object(i.jsx)("ol",{children:this.actionSet.actions.map((function(t){return Object(i.jsx)("li",{children:t.name},t.name)}))})]})}}]),e}(o.Component),N=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).state={actionSets:[]},i.loadList=i.loadList.bind(Object(u.a)(i)),i}return Object(s.a)(e,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"loadList",value:function(){var t=this;x.list().then((function(t){return t.json()})).then((function(n){var e=n.data;console.log(e),t.setState({actionSets:e})})).catch((function(t){console.error("Error updating ActionSet list",t),h(new j("Error updating ActionSet list",t.message,j.ERROR))}))}},{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"ActionSets"}),this.state.actionSets.length>0?this.state.actionSets.map((function(t){return Object(i.jsx)(k,{actionSet:t},t.name)})):Object(i.jsx)("i",{children:"Much empty"})]})}}]),e}(o.Component),w=function(t){Object(l.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(f.a)(this,e),(i=n.call(this,t)).keepPolling=!0,i.state={isRunning:!1},i.update=i.update.bind(Object(u.a)(i)),i}return Object(s.a)(e,[{key:"componentDidMount",value:function(){this.update()}},{key:"update",value:function(){var t=this;y.status().then((function(t){return t.json()})).then((function(n){t.setState({isRunning:n.data})})).catch((function(n){console.error("Error updating Director status",n),h(new j("Error updating Director status",n.message,j.ERROR)),t.setState({isRunning:!1})})).finally((function(){t.keepPolling&&window.setTimeout(t.update,2e3,t.keepPolling)}))}},{key:"render",value:function(){return Object(i.jsxs)("div",{children:["State: ",this.state.isRunning?"Running":"Not running"]})}}]),e}(o.Component);var R=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(g,{}),Object(i.jsx)(w,{}),Object(i.jsx)(S,{}),Object(i.jsx)(N,{})]})},E=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,18)).then((function(n){var e=n.getCLS,i=n.getFID,o=n.getFCP,c=n.getLCP,r=n.getTTFB;e(t),i(t),o(t),c(t),r(t)}))};a.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(R,{})}),document.getElementById("root")),E()}},[[17,1,2]]]);
//# sourceMappingURL=main.e3e9ea1f.chunk.js.map